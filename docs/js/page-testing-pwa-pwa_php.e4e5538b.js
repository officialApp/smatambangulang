(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-testing-pwa-pwa_php"],{"14b9":function(t,n,e){var a=e("5ca1");a(a.P,"String",{repeat:e("97446")})},"34ef":function(t,n,e){e("ec30")("Uint8",1,(function(t){return function(n,e,a){return t(this,n,e,a)}}))},"82b1":function(t,n,e){"use strict";e.r(n);var a,o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._v("\n  membuat ICON GENERATOR : \n  "),e("a",{attrs:{href:"https://realfavicongenerator.net/"}},[t._v("https://realfavicongenerator.net/")]),e("br"),e("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button"},on:{click:t.install}},[t._v("Install")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.title,expression:"vdata.title"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"title",name:"title",placeholder:"title"},domProps:{value:t.vdata.title},on:{input:function(n){n.target.composing||t.$set(t.vdata,"title",n.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.content,expression:"vdata.content"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"content",name:"content",placeholder:"content"},domProps:{value:t.vdata.content},on:{input:function(n){n.target.composing||t.$set(t.vdata,"content",n.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.url,expression:"vdata.url"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"url",name:"url",placeholder:"url"},domProps:{value:t.vdata.url},on:{input:function(n){n.target.composing||t.$set(t.vdata,"url",n.target.value)}}}),e("button",{staticClass:"btn btn-sm btn-primary  ",attrs:{type:"button"},on:{click:t.kirim}},[t._v("SEND Notification")])])},i=[],r=(e("34ef"),e("a481"),e("14b9"),e("bc3a")),s=e.n(r),c={data:function(){return{vdata:{id_penerima:"1",url:"http://localhost:5000"}}},mounted:function(){this.subscribe(),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),a=t}))},methods:{kirim:function(){this.vdata.url={link:this.vdata.url,id:this.vdata.id_penerima},s.a.post("https://infolayanans.now.sh/api/pwa/notifikasi",this.vdata).then((function(t){console.log(t)}))},install:function(){console.log(a),void 0!==a&&(a.prompt(),a.userChoice.then((function(t){"dismissed"==t.outcome?console.log("User cancelled home screen install"):console.log("User added to home screen"),a=null})))},subscribe:function(){var t=this;"Notification"in window?Notification.requestPermission((function(n){"granted"!==n?console.log("notifikasi tidak di perbolehkan"):(t.confPushSub(),console.log("notifikasi aktif"))})):alert("notifikasi tidak didukung ")},confPushSub:function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){console.log(n),n.pushManager.getSubscription().then((function(e){null===e&&n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t.urlB64ToUint8Array("BJUSmaFFmfjl8uvxY2h2A_-gccjB9AH68pwEm347rwiDhugF4KxznF5mSNS7JRa4Lah-QzPzQLuvjG1AaQJYE-U")}).then((function(t){return console.log("Subscribe OK:",t),fetch("https://infolayanans.now.sh/api/pwa/subscription",{method:"POST",body:JSON.stringify(t.toJSON()),headers:{"Content-Type":"application/json",Accept:"application/json"}})})).then((function(){t.aktif=!1,localStorage.setItem("subscribe",!0),t.newNotif("Berhasil Subscribe")})).catch((function(t){console.log("Subscribe Error:",t)}))}))}))},newNotif:function(t){var n={body:t,icon:"https://infolayanans.space/api/icon.png",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"https://infolayanans.space/api/icon.png"};//! cara memunculkan notifikasi dengan windows object
//! cara menjalankan notifikasi dari service worker melalui navigator
"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.showNotification("Subscribe",n)}))},urlB64ToUint8Array:function(t){for(var n="=".repeat((4-t.length%4)%4),e=(t+n).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(e),o=new Uint8Array(a.length),i=0;i<a.length;++i)o[i]=a.charCodeAt(i);return o}}},l=c,u=e("2877"),p=Object(u["a"])(l,o,i,!1,null,null,null);n["default"]=p.exports},97446:function(t,n,e){"use strict";var a=e("4588"),o=e("be13");t.exports=function(t){var n=String(o(this)),e="",i=a(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(n+=n))1&i&&(e+=n);return e}}}]);
//# sourceMappingURL=page-testing-pwa-pwa_php.e4e5538b.js.map