(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-testing-pwa-pwa"],{"0ba3":function(t,n,e){"use strict";e.r(n);var o,i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._v("\n  "+t._s(t.subsss)+"\n  "),e("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button"},on:{click:t.install}},[t._v("Install")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.title,expression:"vdata.title"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"title",name:"title",placeholder:"title"},domProps:{value:t.vdata.title},on:{input:function(n){n.target.composing||t.$set(t.vdata,"title",n.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.content,expression:"vdata.content"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"content",name:"content",placeholder:"content"},domProps:{value:t.vdata.content},on:{input:function(n){n.target.composing||t.$set(t.vdata,"content",n.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.url,expression:"vdata.url"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"url",name:"url",placeholder:"url"},domProps:{value:t.vdata.url},on:{input:function(n){n.target.composing||t.$set(t.vdata,"url",n.target.value)}}}),e("button",{staticClass:"btn btn-sm btn-primary  ",attrs:{type:"button"},on:{click:t.kirim}},[t._v("SEND Notification")])])},a=[],r=(e("34ef"),e("a481"),e("14b9"),e("bc3a")),s=e.n(r),c={data:function(){return{vdata:{id_penerima:"1",url:"http://localhost:5000",subsss:""}}},mounted:function(){this.subscribe(),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),o=t}))},methods:{kirim:function(){this.vdata.url={link:this.vdata.url,id:this.vdata.id_penerima},s.a.post("https://infolayanans.space/api/send_push_notification.php",this.vdata).then((function(t){console.log(t)}))},install:function(){console.log(o),void 0!==o&&(o.prompt(),o.userChoice.then((function(t){"dismissed"==t.outcome?console.log("User cancelled home screen install"):console.log("User added to home screen"),o=null})))},subscribe:function(){var t=this;"Notification"in window?Notification.requestPermission((function(n){"granted"!==n?console.log("notifikasi tidak di perbolehkan"):(t.confPushSub(),console.log("notifikasi aktif"))})):alert("notifikasi tidak didukung ")},confPushSub:function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){console.log(n),n.pushManager.getSubscription().then((function(e){null===e&&n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t.urlB64ToUint8Array("BHb6hCsHUmbFb8xXLP46iv_xzns76xPniKia5FiBC1sd7RiAiMuRnv1MbGo-ey5oKYwb_UIo9PBWB-yIrlHJ184")}).then((function(n){return console.log("Subscribe OK:",n),t.subsss=n,fetch("https://infolayanans.space/api/push_subscription.php",{method:"POST",body:JSON.stringify(n.toJSON()),headers:{"Content-Type":"application/json",Accept:"application/json"}})})).then((function(n){console.log(n),t.aktif=!1,localStorage.setItem("subscribe",!0),t.newNotif("Berhasil Subscribe")})).catch((function(t){console.log("Subscribe Error:",t)}))}))}))},newNotif:function(t){var n={body:t,icon:"https://infolayanans.space/api/icon.png",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"https://infolayanans.space/api/icon.png"};//! cara memunculkan notifikasi dengan windows object
//! cara menjalankan notifikasi dari service worker melalui navigator
"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.showNotification("Subscribe",n)}))},urlB64ToUint8Array:function(t){for(var n="=".repeat((4-t.length%4)%4),e=(t+n).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(e),i=new Uint8Array(o.length),a=0;a<o.length;++a)i[a]=o.charCodeAt(a);return i}}},l=c,u=e("2877"),p=Object(u["a"])(l,i,a,!1,null,null,null);n["default"]=p.exports},"14b9":function(t,n,e){var o=e("5ca1");o(o.P,"String",{repeat:e("97446")})},"34ef":function(t,n,e){e("ec30")("Uint8",1,(function(t){return function(n,e,o){return t(this,n,e,o)}}))},97446:function(t,n,e){"use strict";var o=e("4588"),i=e("be13");t.exports=function(t){var n=String(i(this)),e="",a=o(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(n+=n))1&a&&(e+=n);return e}}}]);
//# sourceMappingURL=page-testing-pwa-pwa.12cf5616.js.map